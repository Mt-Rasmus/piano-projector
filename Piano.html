<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="GUI/stylesheet.css" type="text/css" media="screen">
<meta name="viewport" charset="UTF-8" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
<title>Piano-projector</title>

<!-- Midi.js package -->
<script src="lib/MIDI.js-master/inc/shim/Base64.js" type="text/javascript"></script>
<script src="lib/MIDI.js-master/inc/shim/Base64binary.js" type="text/javascript"></script>
<script src="lib/MIDI.js-master/inc/shim/WebAudioAPI.js" type="text/javascript"></script>
<script src="lib/MIDI.js-master/inc/shim/WebMIDIAPI.js" type="text/javascript"></script>
<script src = "lib/MIDI.js-master/build/MIDI.min.js"> </script>
<script src = "lib/MIDI.js-master/js/midi/audioDetect.js"> </script>
<script src = "lib/MIDI.js-master/js/midi/gm.js"> </script>
<script src = "lib/MIDI.js-master/js/midi/loader.js"> </script>
<script src = "lib/MIDI.js-master/js/midi/player.js"> </script>
<script src = "lib/MIDI.js-master/js/midi/plugin.audiotag.js"> </script>
<script src = "lib/MIDI.js-master/js/midi/plugin.webaudio.js"> </script>
<script src = "lib/MIDI.js-master/js/midi/plugin.webmidi.js"> </script>
<script src = "lib/MIDI.js-master/js/midi/synesthesia.js"> </script>
<script src="lib/MIDI.js-master/inc/jasmid/midifile.js" type="text/javascript"></script>    
<script src="lib/MIDI.js-master/inc/jasmid/replayer.js" type="text/javascript"></script>
<script src="lib/MIDI.js-master/inc/jasmid/stream.js" type="text/javascript"></script>
<script src="lib/MIDI.js-master/js/util/dom_request_xhr.js" type="text/javascript"></script>
<script src="lib/MIDI.js-master/js/util/dom_request_script.js" type="text/javascript"></script>
<script src ="lib/MIDI.js-master/examples/inc/colorspace.js"></script>
<script src ="lib/MIDI.js-master/examples/inc/event.js"></script>
<script src ="lib/MIDI.js-master/examples/inc/timer.js"></script>
<script src = "lib/MIDI.js-master/build/MIDI.min.js"> </script>

<!-- Other external libraries -->
<script src = "lib/soundfontplayer.js"> </script>
<script src = "lib/webmidi/src/webmidi.js"> </script>
<script src="lib\three.js-master\docs\build\three.js"></script>
<script src="lib\three.js-master\src\core\Clock.js"></script>

<!-- Internal js files -->
<script src = "EventReader.js"></script>
<script src = "Song.js"></script>
<script src = "Clock.js"></script>
<script src = "parseSongData.js"></script>
<script src = "getSongArray.js"></script>
<script src = "PointGiver.js"></script>
<script src = "Keyboard.js"></script>
<script src = "midi-player.js"></script>

</head>
<body>
<h1>Piano.html</h1>
<script>

function main(songName){

    //var songName = 'jason_mraz';
    var keyboard = new Keyboard();
    var song = new Song(songName);

    let songArray = [];
    songArray = parseSongData(song.getSongName());

    keyboard.startInputOutput(song);

    song.setVolume(0.4);
    song.playSong();
    startClock();

    initGL();
    animate();

}
//Getting songID from url
main(location.search.substring(1).split("?")[0]);

function initGL() {

    var scene = new THREE.Scene();
    var aspect = window.innerWidth / window.innerHeight;

    var geometry = new THREE.BoxBufferGeometry( 1, 1, 1 );

    var speed = 10;

    var camera = new THREE.PerspectiveCamera( 75, aspect, 0.1, 1000 );
    camera.position.z = 10;
    var light = new THREE.DirectionalLight( 0xb4e7f2, 5 );
    light.position.set( 5, 5, 5 );
    scene.add( light );
    var renderer = new THREE.WebGLRenderer();
    renderer.setSize( window.innerWidth, window.innerHeight );
    renderer.setClearColor( 0xfaf0e6 );
    document.body.appendChild( renderer.domElement );

    var start = false;
    var ton = [];

}


function move(obj){
    obj.position.y += -5 * deltaTime; 
};

function animate(){
    deltaTime = clock.getDelta();
    //Forloop: When start=true the object falls
    for (i = 0; i < ton.length; i++) { 
        if(start){
            move(ton[i]);  
        }
    requestAnimationFrame(animate);
    renderer.render( scene, camera );  
}

}


       

</script>
</body>
</html>