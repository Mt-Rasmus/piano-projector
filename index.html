<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">

        <title>Piano-projector</title>

        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

        <style>      
			body {
                    font-family: Monospace;
                    background-color: black;
                    margin: 0px;
                    overflow: hidden;
                }
        </style>

    </head>

    <body>
     <script src="lib/three.js-master/docs/build/three.min.js"></script>

            <script>
           
                var scene = new THREE.Scene();
                var aspect = window.innerWidth / window.innerHeight;
                var camera = new THREE.PerspectiveCamera( 75, aspect, 0.1, 1000 );
               
                var geometry = new THREE.BoxBufferGeometry( 1, 1, 1 );
                
                var numberofcubes = 5;
                var objects = [];
                var materials = [];
                var oldmaterials = [];
                var j = 0;
                var k = 0;
                var currhex;

                for (i = 0; i < numberofcubes; i++) {         
                  
                  var material = new THREE.MeshLambertMaterial( { color: Math.random() * 0xffffff } );
                  materials[i] = material;
                  var object = new THREE.Mesh( geometry, material );
                  objects[i] = object;

                }

                var light = new THREE.DirectionalLight( 0xffffff, 1 );
				light.position.set( 1, 1, 1 ).normalize();
				scene.add( light );
                 
                var raycaster = new THREE.Raycaster();
                var mouse = new THREE.Vector2(), INTERSECTED;

                var renderer = new THREE.WebGLRenderer();

                renderer.setSize( window.innerWidth, window.innerHeight );
                document.body.appendChild( renderer.domElement );
                

                camera.position.z = 10;

                var posx = -4;
                for (i = 0; i < numberofcubes; i++) {         

                  objects[i].rotation.x += 0.3;
                  objects[i].rotation.y += 0.3;
                  objects[i].position.x = posx ;

                  posx += 2;

                }

                scene.add(objects[0],objects[1], objects[2], objects[3], objects[4]);
               
               
                window.addEventListener('mousemove', onMouseMove, false );

               // window.onload = function() {
                   // canvas = document.getElementById('canvas');

                document.addEventListener('keydown', function(event) {

                    var maxkey = 65 + numberofcubes;

                        for (i = 65; i < maxkey; i++) {
                            if(event.keyCode == i)
                            {   
                                currhex = materials[j].emissive.getHex();
                                oldmaterials[j] = currhex;
                                materials[j].emissive.setHex(0xffffff);
                                j += 1;
                            }
                        }
                 }, false);

                 document.addEventListener('keyup', function(event) {

                    var maxkey = 65 + numberofcubes;

                        for (i = 65; i < maxkey; i++) {
                            if(event.keyCode == i)
                            {   
                                materials[k].emissive.setHex(oldmaterials[k]);
                                k += 1;
                            }
                        }
                 }, false);

                
                function onMouseMove(event) {

                     mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;
	                 mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;

                }

                 function animate(){

                    requestAnimationFrame( animate );
                    render();
                }

                 animate();

                  function render() {

                            raycaster.setFromCamera( mouse, camera );
                            var intersects = raycaster.intersectObjects(scene.children);

                                if ( intersects.length > 0 ) {
                                                    if (INTERSECTED != intersects[0].object) {
                                                        
                                                        if (INTERSECTED) 
                                                                
                                                                INTERSECTED.material.emissive.setHex( INTERSECTED.currentHex );

                                                                INTERSECTED = intersects[0].object;
                                                                
                                                                INTERSECTED.currentHex = INTERSECTED.material.emissive.getHex();
                                                                INTERSECTED.material.emissive.setHex(0xff0000);
                                                                }

                                                             } else {
                                                                        if (INTERSECTED) 
                                                                            INTERSECTED.material.emissive.setHex( INTERSECTED.currentHex );
                                                                            INTERSECTED = null;
                                                                     }

                             renderer.render( scene, camera );
                             
                    }
                  

                    

             </script>

    </body>

</html>